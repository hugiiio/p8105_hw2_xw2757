p8105\_hw2\_xw2757
================

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──

    ## ✓ ggplot2 3.3.5     ✓ purrr   0.3.4
    ## ✓ tibble  3.1.4     ✓ dplyr   1.0.7
    ## ✓ tidyr   1.1.3     ✓ stringr 1.4.0
    ## ✓ readr   2.0.1     ✓ forcats 0.5.1

    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readxl)
```

\#\#Problem 1 **Loading and cleaning data**

``` r
mtw_df <- 
  read_excel("TW_data.xlsx", sheet = "Mr. Trash Wheel", skip = 1, ) %>% 
  janitor::clean_names() %>% 
  filter(dumpster != "" , dumpster != "Grand Total") %>% 
  select(dumpster:homes_powered) %>% 
  mutate(month = factor(month), year = factor(year), dumpster = as.numeric(dumpster), sports_balls = round(sports_balls, digit = 0))
```

    ## New names:
    ## * `` -> ...15
    ## * `` -> ...16
    ## * `` -> ...17

``` r
p2019_df <- 
  read_excel("TW_data.xlsx", sheet = "2019 Precipitation", skip = 1, ) %>% 
  janitor::clean_names() %>% 
  na.omit() %>% 
  mutate(year = "2019") %>% 
  rename(prcp = total)

p2018_df <- 
  read_excel("TW_data.xlsx", sheet = "2018 Precipitation", skip = 1, ) %>% 
  janitor::clean_names() %>% 
  na.omit() %>% 
  mutate(year = "2018") %>% 
  rename(prcp = total)

prcp_df <-  
  bind_rows(p2018_df, p2019_df)

prcp_df %>% 
  mutate(month = month.name[month])
```

    ## # A tibble: 24 × 3
    ##    month      prcp year 
    ##    <chr>     <dbl> <chr>
    ##  1 January    0.94 2018 
    ##  2 February   4.8  2018 
    ##  3 March      2.69 2018 
    ##  4 April      4.69 2018 
    ##  5 May        9.27 2018 
    ##  6 June       4.77 2018 
    ##  7 July      10.2  2018 
    ##  8 August     6.45 2018 
    ##  9 September 10.5  2018 
    ## 10 October    2.12 2018 
    ## # … with 14 more rows

**Describing data** In data set “Mr. Trash Wheel”, the variables
descirbed are as followed: dumpster, month, year, date, weight\_tons,
volume\_cubic\_yards, plastic\_bottles, polystyrene, cigarette\_butts,
glass\_bottles, grocery\_bags, chip\_bags, sports\_balls,
homes\_powered. There is a total number of 453 from the following years:
2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021. Of all the trash
categories, total number of sports balls picked up is 5321, the mean
number is 11.7461369, and the median is 9.

In precipitation data set, there are a total of 24 observations. The
mean precipitation in 2018 is 5.8608333, and the median is 5.455. The
mean precipitation in 2019 is 2.8291667, and the median is 3.335. Total
precipitation in 2018 is 70.33.

\#\#Problem 2

**Importing and merging data**

``` r
pols_month <- 
  read_csv(file = "fivethirtyeight_datasets/pols-month.csv") %>% 
  separate(mon, c("year", "month", "day"), sep = "-" , convert = TRUE) %>% 
  mutate(month = month.abb[month], 
         president = ifelse(prez_dem == 1, "dem", "gop")) %>% 
  select(-day, -prez_dem, -prez_gop)
```

    ## Rows: 822 Columns: 9

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp <- 
  read_csv(file = "fivethirtyeight_datasets/snp.csv") %>% 
  separate(date, c("month", "day", "year"), sep = "/") %>% 
  mutate(year = ifelse(year <= "15" ,  paste0("20", year), paste0("19", year)), month = as.numeric(month)) %>% 
  arrange(year, month) %>% 
  mutate(month = month.abb[month], year = as.numeric(year)) %>% 
  select(-day)
```

    ## Rows: 787 Columns: 2

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemply <- 
  read_csv(file = "fivethirtyeight_datasets/unemployment.csv") %>% 
  pivot_longer(Jan:Dec, names_to = "month", values_to = "unemployment")
```

    ## Rows: 68 Columns: 13

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp_pols <- 
  left_join(pols_month, snp, by = c("year" = "year" , "month" = "month"))

full_df <- 
  left_join(snp_pols, unemply, by = c("year" = "Year" , "month" = "month"))
```

The data set “full\_df” describes informations compiled from data sets
“snp”, “unemply”, and “pols\_month”. There are a total of 822
observations. “snp” contains information on S&P close number. “unemply”
contains employment rate. “pols\_month” contains information on the dem
and gop number of representatives. The final data set contains data from
year 1947 to 2015.
